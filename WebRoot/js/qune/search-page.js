(function(e){var t={id:"a4d1284853f7a47fd94c021e2f6effd9",filename:"hogan.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){var r={};(function(e,t){function a(e){return String(e===null||e===undefined?"":e)}function f(e){e=a(e);return u.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(s,"&#39;").replace(o,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r;this.c=r;this.options=i;this.text=n||"";this.buf=t?[]:""};e.Template.prototype={r:function(e,t,n){return""},v:f,t:a,render:function(t,n,r){return this.ri([t],n||{},r)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];if(!i){return""}if(this.c&&typeof i=="string"){i=this.c.compile(i,this.options)}return i.ri(t,n,r)},rs:function(e,t,n){var r=e[e.length-1];if(!l(r)){n(e,t,this);return}for(var i=0;i<r.length;i++){e.push(r[i]);n(e,t,this);e.pop()}},s:function(e,t,n,r,i,s,o){var u;if(l(e)&&e.length===0){return false}if(typeof e=="function"){e=this.ls(e,t,n,r,i,s,o)}u=e===""||!!e;if(!r&&u&&t){t.push(typeof e=="object"?e:t[t.length-1])}return u},d:function(e,t,n,r){var i=e.split("."),s=this.f(i[0],t,n,r),o=null;if(e==="."&&l(t[t.length-2])){return t[t.length-1]}for(var u=1;u<i.length;u++){if(s&&typeof s=="object"&&i[u]in s){o=s;s=s[i[u]]}else{s=""}}if(r&&!s){return false}if(!r&&typeof s=="function"){t.push(o);s=this.lv(s,t,n);t.pop()}return s},f:function(e,t,n,r){var i=false,s=null,o=false;for(var u=t.length-1;u>=0;u--){s=t[u];if(s&&typeof s=="object"&&e in s){i=s[e];o=true;break}}if(!o){return r?false:""}if(!r&&typeof i=="function"){i=this.lv(i,t,n)}return i},ho:function(e,t,n,r,i){var s=this.c;var o=this.options;o.delimiters=i;var r=e.call(t,r);r=r==null?String(r):r.toString();this.b(s.compile(r,o).render(t,n));return false},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");this.buf=[];return e}:function(){var e=this.buf;this.buf="";return e},ls:function(e,t,n,r,i,s,o){var u=t[t.length-1],a=null;if(!r&&this.c&&e.length>0){return this.ho(e,u,n,this.text.substring(i,s),o)}a=e.call(u);if(typeof a=="function"){if(r){return true}else if(this.c){return this.ho(a,u,n,this.text.substring(i,s),o)}}return a},lv:function(e,t,n){var r=t[t.length-1];var i=e.call(r);if(typeof i=="function"){i=a(i.call(r));if(this.c&&~i.indexOf("{{")){return this.c.compile(i,this.options).render(r,n)}}return a(i)}};var n=/&/g,r=/</g,i=/>/g,s=/\'/g,o=/\"/g,u=/[&<>\"\']/;var l=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}})(r);(function(e){function u(e){if(e.n.substr(e.n.length-1)==="}"){e.n=e.n.substring(0,e.n.length-1)}}function a(e){if(e.trim){return e.trim()}return e.replace(/^\s*|\s*$/g,"")}function f(e,t,n){if(t.charAt(n)!=e.charAt(0)){return false}for(var r=1,i=e.length;r<i;r++){if(t.charAt(n+r)!=e.charAt(r)){return false}}return true}function l(e,t,n,r){var i=[],s=null,o=null;while(e.length>0){o=e.shift();if(o.tag=="#"||o.tag=="^"||c(o,r)){n.push(o);o.nodes=l(e,o.tag,n,r);i.push(o)}else if(o.tag=="/"){if(n.length===0){throw new Error("Closing tag without opener: /"+o.n)}s=n.pop();if(o.n!=s.n&&!h(o.n,s.n,r)){throw new Error("Nesting error: "+s.n+" vs. "+o.n)}s.end=o.i;return i}else{i.push(o)}}if(n.length>0){throw new Error("missing closing tag: "+n.pop().n)}return i}function c(e,t){for(var n=0,r=t.length;n<r;n++){if(t[n].o==e.n){e.tag="#";return true}}}function h(e,t,n){for(var r=0,i=n.length;r<i;r++){if(n[r].c==e&&n[r].o==t){return true}}}function p(e){return e.replace(s,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function d(e){return~e.indexOf(".")?"d":"f"}function v(e){var t="";for(var n=0,r=e.length;n<r;n++){var i=e[n].tag;if(i=="#"){t+=m(e[n].nodes,e[n].n,d(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag)}else if(i=="^"){t+=g(e[n].nodes,e[n].n,d(e[n].n))}else if(i=="<"||i==">"){t+=y(e[n])}else if(i=="{"||i=="&"){t+=b(e[n].n,d(e[n].n))}else if(i=="\n"){t+=E('"\\n"'+(e.length-1==n?"":" + i"))}else if(i=="_v"){t+=w(e[n].n,d(e[n].n))}else if(i===undefined){t+=E('"'+p(e[n])+'"')}}return t}function m(e,t,n,r,i,s){return"if(_.s(_."+n+'("'+p(t)+'",c,p,1),'+"c,p,0,"+r+","+i+',"'+s+'")){'+"_.rs(c,p,"+"function(c,p,_){"+v(e)+"});c.pop();}"}function g(e,t,n){return"if(!_.s(_."+n+'("'+p(t)+'",c,p,1),c,p,1,0,0,"")){'+v(e)+"};"}function y(e){return'_.b(_.rp("'+p(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function b(e,t){return"_.b(_.t(_."+t+'("'+p(e)+'",c,p,0)));'}function w(e,t){return"_.b(_.v(_."+t+'("'+p(e)+'",c,p,0)));'}function E(e){return"_.b("+e+");"}var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,s=/\\/g,o={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(n,r){function S(){if(v.length>0){m.push(new String(v));v=""}}function x(){var e=true;for(var n=b;n<m.length;n++){e=m[n].tag&&o[m[n].tag]<o["_v"]||!m[n].tag&&m[n].match(t)===null;if(!e){return false}}return e}function T(e,t){S();if(e&&x()){for(var n=b,r;n<m.length;n++){if(!m[n].tag){if((r=m[n+1])&&r.tag==">"){r.indent=m[n].toString()}m.splice(n,1)}}}else if(!t){m.push({tag:"\n"})}g=false;b=m.length}function N(e,t){var n="="+E,r=e.indexOf(n,t),i=a(e.substring(e.indexOf("=",t)+1,r)).split(" ");w=i[0];E=i[1];return r+n.length-1}var i=n.length,s=0,l=1,c=2,h=s,p=null,d=null,v="",m=[],g=false,y=0,b=0,w="{{",E="}}";if(r){r=r.split(" ");w=r[0];E=r[1]}for(y=0;y<i;y++){if(h==s){if(f(w,n,y)){--y;S();h=l}else{if(n.charAt(y)=="\n"){T(g)}else{v+=n.charAt(y)}}}else if(h==l){y+=w.length-1;d=o[n.charAt(y+1)];p=d?n.charAt(y+1):"_v";if(p=="="){y=N(n,y);h=s}else{if(d){y++}h=c}g=y}else{if(f(E,n,y)){m.push({tag:p,n:a(v),otag:w,ctag:E,i:p=="/"?g-E.length:y+w.length});v="";y+=E.length-1;h=s;if(p=="{"){if(E=="}}"){y++}else{u(m[m.length-1])}}}else{v+=n.charAt(y)}}}T(g,true);return m};e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+v(t)+"return _.fl();";if(r.asString){return"function(c,p,i){"+i+";}"}return new e.Template(new Function("c","p","i",i),n,e,r)};e.parse=function(e,t,n){n=n||{};return l(e,"",[],n.sectionTags||[])},e.cache={};e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString;var r=this.cache[n];if(r){return r}r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t);return this.cache[n]=r}})(r);t.exports=r}(t.exports,t,e);e.____MODULES["a4d1284853f7a47fd94c021e2f6effd9"]=t.exports})(this);(function(e){var t={id:"510e2f673b52e22a386cfc1eec6560c8",filename:"iscroll.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e,n,r){function o(e,t){this.wrapper=typeof e=="string"?n.querySelector(e):e;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var r in t){this.options[r]=t[r]}this.translateZ=this.options.HWCompositing&&s.hasPerspective?" translateZ(0)":"";this.options.useTransition=s.hasTransition&&this.options.useTransition;this.options.useTransform=s.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?s.ease[this.options.bounceEasing]||s.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)};var s=function(){function o(e){if(s===false)return false;if(s==="")return e;return s+e.charAt(0).toUpperCase()+e.substr(1)}var t={};var i=n.createElement("div").style;var s=function(){var e=["t","webkitT","MozT","msT","OT"],t,n=0,r=e.length;for(;n<r;n++){t=e[n]+"ransform";if(t in i)return e[n].substr(0,e[n].length-1)}return false}();t.getTime=Date.now||function(){return(new Date).getTime()};t.extend=function(e,t){for(var n in t){e[n]=t[n]}};t.addEvent=function(e,t,n,r){e.addEventListener(t,n,!!r)};t.removeEvent=function(e,t,n,r){e.removeEventListener(t,n,!!r)};t.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t};t.momentum=function(e,t,n,i,s,o){var u=e-t,a=r.abs(u)/n,f,l;o=o===undefined?6e-4:o;f=e+a*a/(2*o)*(u<0?-1:1);l=a/o;if(f<i){f=s?i-s/2.5*(a/8):i;u=r.abs(f-e);l=u/a}else if(f>0){f=s?s/2.5*(a/8):0;u=r.abs(e)+f;l=u/a}return{destination:r.round(f),duration:l}};var u=o("transform");t.extend(t,{hasTransform:u!==false,hasPerspective:o("perspective")in i,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:o("transition")in i});t.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion);t.extend(t.style={},{transform:u,transitionTimingFunction:o("transitionTimingFunction"),transitionDuration:o("transitionDuration"),transitionDelay:o("transitionDelay"),transformOrigin:o("transformOrigin")});t.hasClass=function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");return n.test(e.className)};t.addClass=function(e,n){if(t.hasClass(e,n)){return}var r=e.className.split(" ");r.push(n);e.className=r.join(" ")};t.removeClass=function(e,n){if(!t.hasClass(e,n)){return}var r=new RegExp("(^|\\s)"+n+"(\\s|$)","g");e.className=e.className.replace(r," ")};t.offset=function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}return{left:t,top:n}};t.preventDefaultException=function(e,t){for(var n in t){if(t[n].test(e[n])){return true}}return false};t.extend(t.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});t.extend(t.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return r.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e=e-1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){if((e/=1)<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}}},elastic:{style:"",fn:function(e){var t=.22,n=.4;if(e===0){return 0}if(e==1){return 1}return n*r.pow(2,-10*e)*r.sin((e-t/4)*2*r.PI/t)+1}}});t.tap=function(e,t){var r=n.createEvent("Event");r.initEvent(t,true,true);r.pageX=e.pageX;r.pageY=e.pageY;e.target.dispatchEvent(r)};t.click=function(e){var t=e.target,r;if(!/(SELECT|INPUT|TEXTAREA)/i.test(t.tagName)){r=n.createEvent("MouseEvents");r.initMouseEvent("click",true,true,e.view,1,t.screenX,t.screenY,t.clientX,t.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);r._constructed=true;t.dispatchEvent(r)}};return t}();o.prototype={version:"5.1.3",_init:function(){this._initEvents()},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(e){if(e.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(e){if(s.eventType[e.type]!=1){if(e.button!==0){return}}if(!this.enabled||this.initiated&&s.eventType[e.type]!==this.initiated){return}if(this.options.preventDefault&&!s.isBadAndroid&&!s.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault()}var t=e.touches?e.touches[0]:e,n;this.initiated=s.eventType[e.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=s.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;n=this.getComputedPosition();this._translate(r.round(n.x),r.round(n.y));this._execEvent("scrollEnd")}else if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=t.pageX;this.pointY=t.pageY;this._execEvent("beforeScrollStart")},_move:function(e){if(!this.enabled||s.eventType[e.type]!==this.initiated){return}if(this.options.preventDefault){e.preventDefault()}var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,i=t.pageY-this.pointY,o=s.getTime(),u,a,f,l;this.pointX=t.pageX;this.pointY=t.pageY;this.distX+=n;this.distY+=i;f=r.abs(this.distX);l=r.abs(this.distY);if(o-this.endTime>300&&f<10&&l<10){return}if(!this.directionLocked&&!this.options.freeScroll){if(f>l+this.options.directionLockThreshold){this.directionLocked="h"}else if(l>=f+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){e.preventDefault()}else if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}i=0}else if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){e.preventDefault()}else if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}n=0}n=this.hasHorizontalScroll?n:0;i=this.hasVerticalScroll?i:0;u=this.x+n;a=this.y+i;if(u>0||u<this.maxScrollX){u=this.options.bounce?this.x+n/3:u>0?0:this.maxScrollX}if(a>0||a<this.maxScrollY){a=this.options.bounce?this.y+i/3:a>0?0:this.maxScrollY}this.directionX=n>0?-1:n<0?1:0;this.directionY=i>0?-1:i<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(u,a);if(o-this.startTime>300){this.startTime=o;this.startX=this.x;this.startY=this.y}},_end:function(e){if(!this.enabled||s.eventType[e.type]!==this.initiated){return}if(this.options.preventDefault&&!s.preventDefaultException(e.target,this.options.preventDefaultException)){e.preventDefault()}var t=e.changedTouches?e.changedTouches[0]:e,n,i,o=s.getTime()-this.startTime,u=r.round(this.x),a=r.round(this.y),f=r.abs(u-this.startX),l=r.abs(a-this.startY),c=0,h="";this.isInTransition=0;this.initiated=0;this.endTime=s.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(u,a);if(!this.moved){if(this.options.tap){s.tap(e,this.options.tap)}if(this.options.click){s.click(e)}this._execEvent("scrollCancel");return}if(this._events.flick&&o<200&&f<100&&l<100){this._execEvent("flick");return}if(this.options.momentum&&o<300){n=this.hasHorizontalScroll?s.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:u,duration:0};i=this.hasVerticalScroll?s.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0};u=n.destination;a=i.destination;c=r.max(n.duration,i.duration);this.isInTransition=1}if(u!=this.x||a!=this.y){if(u>0||u<this.maxScrollX||a>0||a<this.maxScrollY){h=s.ease.quadratic}this.scrollTo(u,a,c,h);return}this._execEvent("scrollEnd")},_resize:function(){var e=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,n=this.y;e=e||0;if(!this.hasHorizontalScroll||this.x>0){t=0}else if(this.x<this.maxScrollX){t=this.maxScrollX}if(!this.hasVerticalScroll||this.y>0){n=0}else if(this.y<this.maxScrollY){n=this.maxScrollY}if(t==this.x&&n==this.y){return false}this.scrollTo(t,n,e,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var e=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=s.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(e,t){if(!this._events[e]){this._events[e]=[]}this._events[e].push(t)},off:function(e,t){if(!this._events[e]){return}var n=this._events[e].indexOf(t);if(n>-1){this._events[e].splice(n,1)}},_execEvent:function(e){if(!this._events[e]){return}var t=0,n=this._events[e].length;if(!n){return}for(;t<n;t++){this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,n,r){e=this.x+e;t=this.y+t;n=n||0;this.scrollTo(e,t,n,r)},scrollTo:function(e,t,n,r){r=r||s.ease.circular;this.isInTransition=this.options.useTransition&&n>0;if(!n||this.options.useTransition&&r.style){this._transitionTimingFunction(r.style);this._transitionTime(n);this._translate(e,t)}else{this._animate(e,t,n,r.fn)}},scrollToElement:function(e,t,n,i,o){e=e.nodeType?e:this.scroller.querySelector(e);if(!e){return}var u=s.offset(e);u.left-=this.wrapperOffset.left;u.top-=this.wrapperOffset.top;if(n===true){n=r.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)}if(i===true){i=r.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)}u.left-=n||0;u.top-=i||0;u.left=u.left>0?0:u.left<this.maxScrollX?this.maxScrollX:u.left;u.top=u.top>0?0:u.top<this.maxScrollY?this.maxScrollY:u.top;t=t===undefined||t===null||t==="auto"?r.max(r.abs(this.x-u.left),r.abs(this.y-u.top)):t;this.scrollTo(u.left,u.top,t,o)},_transitionTime:function(e){e=e||0;this.scrollerStyle[s.style.transitionDuration]=e+"ms";if(!e&&s.isBadAndroid){this.scrollerStyle[s.style.transitionDuration]="0.001s"}},_transitionTimingFunction:function(e){this.scrollerStyle[s.style.transitionTimingFunction]=e},_translate:function(e,t){if(this.options.useTransform){this.scrollerStyle[s.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ}else{e=r.round(e);t=r.round(t);this.scrollerStyle.left=e+"px";this.scrollerStyle.top=t+"px"}this.x=e;this.y=t},_initEvents:function(t){var n=t?s.removeEvent:s.addEvent,r=this.options.bindToWrapper?this.wrapper:e;n(e,"orientationchange",this);n(e,"resize",this);if(this.options.click){n(this.wrapper,"click",this,true)}if(!this.options.disableMouse){n(this.wrapper,"mousedown",this);n(r,"mousemove",this);n(r,"mousecancel",this);n(r,"mouseup",this)}if(s.hasPointer&&!this.options.disablePointer){n(this.wrapper,s.prefixPointerEvent("pointerdown"),this);n(r,s.prefixPointerEvent("pointermove"),this);n(r,s.prefixPointerEvent("pointercancel"),this);n(r,s.prefixPointerEvent("pointerup"),this)}if(s.hasTouch&&!this.options.disableTouch){n(this.wrapper,"touchstart",this);n(r,"touchmove",this);n(r,"touchcancel",this);n(r,"touchend",this)}n(this.scroller,"transitionend",this);n(this.scroller,"webkitTransitionEnd",this);n(this.scroller,"oTransitionEnd",this);n(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t=e.getComputedStyle(this.scroller,null),n,r;if(this.options.useTransform){t=t[s.style.transform].split(")")[0].split(", ");n=+(t[12]||t[4]);r=+(t[13]||t[5])}else{n=+t.left.replace(/[^-\d.]/g,"");r=+t.top.replace(/[^-\d.]/g,"")}return{x:n,y:r}},_animate:function(e,t,n,r){function c(){var h=s.getTime(),p,d,v;if(h>=l){o.isAnimating=false;o._translate(e,t);if(!o.resetPosition(o.options.bounceTime)){o._execEvent("scrollEnd")}return}h=(h-f)/n;v=r(h);p=(e-u)*v+u;d=(t-a)*v+a;o._translate(p,d);if(o.isAnimating){i(c)}}var o=this,u=this.x,a=this.y,f=s.getTime(),l=f+n;this.isAnimating=true;c()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":if(!e._constructed){e.preventDefault();e.stopPropagation()}break}}};o.utils=s;if(typeof t!="undefined"&&t.exports){t.exports=o}else{e.IScroll=o}})(window,document,Math)}(t.exports,t,e);e.____MODULES["510e2f673b52e22a386cfc1eec6560c8"]=t.exports})(this);(function(e){var t={id:"fdbb088f6508444025171627b56a2d49",filename:"cookie.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){(function(e){e.extend(e.fn,{cookie:function(t,n,r){var i,s,o,u;if(arguments.length>1&&String(n)!=="[object Object]"){r=e.extend({},r);if(n===null||n===undefined)r.expires=-1;if(typeof r.expires==="number"){i=r.expires*24*60*60*1e3;s=r.expires=new Date;s.setTime(s.getTime()+i)}n=String(n);return document.cookie=[encodeURIComponent(t),"=",r.raw?n:encodeURIComponent(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}r=n||{};u=r.raw?function(e){return e}:decodeURIComponent;return(o=(new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)")).exec(document.cookie))?u(o[1]):null}})})(Zepto)}(t.exports,t,e);e.____MODULES["fdbb088f6508444025171627b56a2d49"]=t.exports})(this);(function(e){var t={id:"538c2c744132982a9e3ebf59bf162076",filename:"index.string",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["index"]='<section class="m-search-page search-popup" id="{{id}}">\n    <div class="m-search-page-box">\n        <div class="input-wrapper">\n            <input type="text" autocomplete="off" maxlength="25" class="input" placeholder=""/>\n        </div>\n        <i class="yo-ico search-ico">&#xf002;</i>\n        <i class="yo-ico close-ico">&#xf00d;</i>\n        <span class="cancel">取消</span>\n    </div>\n    <div class="m-search-page-list">\n        <div class="content-wrapper"></div>\n    </div>\n</section>';if(typeof t!=="undefined")t.exports=window.QTMPL["index"]}(t.exports,t,e);e.____MODULES["538c2c744132982a9e3ebf59bf162076"]=t.exports})(this);(function(e){var t={id:"22da1854d90ffee1fdb0a0078a9bc1b1",filename:"historylist.string",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["historylist"]='<div class="history-list">\n    <div class="label">\n        历史搜索\n        <span class="btn-history-clear">清除</span>\n    </div>\n    <ul class="list">\n        {{#list}}\n            <li data-key="{{key}}" class="item">{{value}}</li>\n        {{/list}}\n    </ul>\n</div>';if(typeof t!=="undefined")t.exports=window.QTMPL["historylist"]}(t.exports,t,e);e.____MODULES["22da1854d90ffee1fdb0a0078a9bc1b1"]=t.exports})(this);(function(e){var t={id:"4ccc183d3116fba579596404e3491c61",filename:"recommendlist.string",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["recommendlist"]='<div class="recommend-list">\n    <h2 class="label">热门推荐</h2>\n    <ul class="list">\n        {{#list}}\n            <li data-url="{{url}}" data-log=\'{{log}}\' data-key="{{key}}" class="item">{{key}}</li>\n        {{/list}}\n    </ul>\n</div>';if(typeof t!=="undefined")t.exports=window.QTMPL["recommendlist"]}(t.exports,t,e);e.____MODULES["4ccc183d3116fba579596404e3491c61"]=t.exports})(this);(function(e){var t={id:"cedecf470f20de335310d5b9718762bb",filename:"suglist.string",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(e,t,n){if(typeof window.QTMPL==="undefined")window.QTMPL={};window.QTMPL["suglist"]='<ul class="sug-list">\n    {{#list}}\n        <li class="item link" data-key="{{text}}" data-url="{{url}}" data-log=\'{{log}}\'>\n            <div class="info flex {{type}}">\n                {{{displayText}}}\n                <em class="district-name">{{hint}}</em>\n            </div>\n            {{#hasPrice}}\n                <div class="price">\n                    <i class="ico">&yen;</i>\n                    <em class="num">{{price}}</em>起\n                </div>\n            {{/hasPrice}}\n         </li>\n    {{/list}}\n</ul>';if(typeof t!=="undefined")t.exports=window.QTMPL["suglist"]}(t.exports,t,e);e.____MODULES["cedecf470f20de335310d5b9718762bb"]=t.exports})(this);(function(e){var t={id:"190b46b94e2149b28f9ac370e8bc7750",filename:"index.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){function c(e){this.id="search-popup-"+window.setTimeout(1);this.params=$.extend({recommendUrl:"http://touchsearch.qunar.com/intention/getTouchHistoryAndHotSuggestionHtml.do",sugUrl:"http://touchsearch.qunar.com/intention/searchTouchSuggestionHtml.do",searchUrl:"http://touchsearch.qunar.com/intention/productlist.htm?cat=suggestion&q=",logUrl:"http://touchsearch.qunar.com/intention/recordLog.do",preQueryUrl:"http://touchsearch.qunar.com//intention/getPrepareSearchData.do",searchBarInputId:"#searchBarInput",eventName:"tap",timeout:3e3,historyTextLength:15,cookie:{key:"QN251",domain:".qunar.com",path:"/",expires:365*365*365}},e);this.cache={};this.cacheKey={historyList:"popup-history-list",recommendList:"popup-recommend-list",position:"popup-positioin"};this.moduleData={historyList:[],recommendList:[],sugList:[]};this._createNode();this._init()}var i=e.____MODULES["a4d1284853f7a47fd94c021e2f6effd9"],s=e.____MODULES["510e2f673b52e22a386cfc1eec6560c8"],o=e.____MODULES["fdbb088f6508444025171627b56a2d49"],u=e.____MODULES["538c2c744132982a9e3ebf59bf162076"],a=e.____MODULES["22da1854d90ffee1fdb0a0078a9bc1b1"],f=e.____MODULES["4ccc183d3116fba579596404e3491c61"],l=e.____MODULES["cedecf470f20de335310d5b9718762bb"];c.prototype={_init:function(){this.container=$("#"+this.id);this.inputObj=$(".input",this.container);this.pageListContainer=$(".content-wrapper",this.container);this.iScroll=new s(this.pageListContainer.parent().get(0));this.iScroll.on("beforeScrollStart",function(){window.setTimeout(function(){var e=document.activeElement;if(e&&e.blur){e.blur()}},2)});this._bindEvent();this._getPreQuery()},_getPreQuery:function(){function i(t){if(t&&t.homeQuery&&t.searchQuery){var n=$(e.params.searchBarInputId),r=n.data("query-enable");n.data("search-query",t.searchQuery||"");if(r!==false&&t.homeQuery){$(e.params.searchBarInputId).html(t.homeQuery)}}}var e=this,t=0,n=[],r=0;$.ajax({url:e.params.preQueryUrl,dataType:"jsonp",timeout:e.params.timeout,success:function(e){if(e&&e.status===0){t=e.data.displayTime||0;n=e.data.operationItems;if(t===0){i(n[0])}else{window.setInterval(function(){if(r>n.length-1){r=0}i(n[r]);r++},t)}}}})},_createNode:function(){if($(this.id).length>0){return}var e=i.compile(u),t=e.render({id:this.id});$("body").append(t)},_bindEvent:function(){var e=this,t=$(".search-ico",e.container),n=$(".close-ico",e.container),r=$(".cancel",e.container);n.on("click",function(){e.inputObj.val("").focus()});r.on("click",function(t){e.hide();t.preventDefault();t.stopPropagation()});t.on("click",function(){e._submitSearch()});e.inputObj.on("keydown",function(t){var n=this.value.trimLeft();if(t.keyCode===13&&n){e._submitSearch()}else{this.focus()}});e.inputObj.on("blur focus input",function(t){var r=this.value.trimLeft(),i=e.pageListContainer.data("default-module");if(r){n.show()}else{n.hide();this.value="";if(!!i){return}e.pageListContainer.data("default-module",1);e._showHistoryAndRecommend()}if(t.type==="input"&&r){e.pageListContainer.data("default-module",null);e._renderSug(r)}});$(window).on("resize",function(){e.pageListContainer.parent().css("height","100%");e._refreshIScroll()});$(e.container).on(e.params.eventName,".history-list .item",function(){var t=$(this).attr("data-key");if(!t){return}e._sendSugRequest({q:t},function(n){var r=n.shift();e._search({key:t,url:r.url,log:r.log})})});$(e.container).on(e.params.eventName,".recommend-list .item",function(){var t=$(this).attr("data-key"),n=$(this).data("url"),r=$(this).data("log");if(!t){return}e._search({key:t,url:n,log:r})});$(e.container).on(e.params.eventName,".link",function(t){e._search({key:$(this).attr("data-key"),url:$(this).data("url"),log:$(this).data("log")})});$(e.container).on(e.params.eventName,".btn-history-clear",function(){$.fn.cookie(e.params.cookie.key,null,{path:e.params.cookie.path,domain:e.params.cookie.domain,expires:"Thu, 01 Jan 1970 00:00:01 GMT"});e.moduleData.historyList=[];$(this).parent().parent().empty().remove()})},_submitSearch:function(){var e=this.inputObj.val(),t=this.moduleData.sugList[0]||{};if(e.length===0){this.inputObj.focus();return}if(t.url){this._search({key:e,url:t.url,log:t.log})}},_search:function(e){var t=this.moduleData;if(e.key){for(var n=0,r=t.historyList.length;n<r;n++){if(t.historyList[n]==e.key){t.historyList.splice(n,1);break}}t.historyList.unshift(e.key);$.fn.cookie(this.params.cookie.key,t.historyList.join(","),{path:this.params.cookie.path,expires:this.params.cookie.expires,domain:this.params.cookie.domain})}this._sendLogInfo(e);window.location.href=this._extendUrl(e.url)},_sendLogInfo:function(e){var t=this;$.ajax({url:t.params.logUrl,dataType:"jsonp",timeout:t.params.timeout,data:{logData:e.log,host:encodeURIComponent(window.location.host)}})},_getLocation:function(){var e=this;if(e.cache[e.cacheKey.position]){return}if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(t){e.cache[e.cacheKey.position]={lon:t.coords.longitude,lat:t.coords.latitude}},function(){},{timeout:1e4})}},_renderSug:function(e){function f(){e=t.inputObj.val().trimLeft();if(!e){return}u=t._highlight(e,u);var n=u[0];if(n&&n.type==="h5"){u[0].displayText='<label class="label">搜索</label><em class="input-key highlight">'+n.text+"</em>"}t.moduleData.sugList=u;o=s.render({list:u});t.pageListContainer.html(o);t._refreshIScroll()}var t=this,n=t.cache[t.cacheKey.position]||{},r={q:e,currLatitude:n.lat||"",currLongitude:n.lon||""},s=i.compile(l),o="",u=[],a={text:e,type:"h5",url:this.params.searchUrl+e,displayText:e};u.push(a);t._sendSugRequest(t._extendParam(r),function(e){var t=e,n=t.shift();u=u.concat(t);u[0].type=n.type;u[0].url=n.url;u[0].displayText=n.text;u[0].hint=n.hint;f()});f()},_sendSugRequest:function(e,t){var n=this;$.ajax({url:n.params.sugUrl,data:$.param(e),dataType:"jsonp",timeout:n.params.timeout,success:function(e){if(e&&e.status===0&&e.data.length>0&&t){t(e.data)}}})},_highlight:function(e,t){var n=new RegExp("("+e+")","gi"),r=0,i=t.length,s;for(;r<i;r++){s=t[r];if(s){s.hasPrice=!!s.price;s.displayText=s.text.replace(n,'<em class="highlight">$1</em>')}}return t},_extendParam:function(e){var t=$.fn.cookie("QN48")+"-QN48_"+(new Date).getTime(),n=encodeURIComponent(window.location.host);e=$.extend({requestId:t,domain:n},e);return e},_extendUrl:function(e){var t=window.location,n=t.hostname,r=n.substr(0,n.indexOf(".")),i=new RegExp("(?:^|&)host=([^&]*)(&|$)");if(r!=="activity"&&r!=="touch"){var s=t.search.substr(1).match(i);if(s){r=unescape(s[1])}}e=e.indexOf("?")>=0?e+"&host="+r:e+"?host="+r;return e},_showHistoryAndRecommend:function(){var e=this,t=e.pageListContainer.empty();(function(){var n=$.fn.cookie(e.params.cookie.key),r=[];if(!n){return}n=n.split(",").slice(0,15);n.forEach(function(t){r.push({key:t,value:t.length>e.params.historyTextLength?t.substr(0,e.params.historyTextLength)+"..":t})});e.moduleData.historyList=n;var s=i.compile(a),o=s.render({list:r});t.append(o)})();(function(){if(e.cache[e.cacheKey.recommendList]!==void 0){t.append(e.cache[e.cacheKey.recommendList])}else{$.ajax({url:e.params.recommendUrl,dataType:"jsonp",data:e._extendParam({}),timeout:e.params.timeout,success:function(n){if(n&&n.status===0){e.moduleData.recommendList=n.data;e.moduleData.recommendList.forEach(function(t){t.url=e._extendUrl(t.url)});var r=i.compile(f),s=r.render({list:e.moduleData.recommendList});e.cache[e.cacheKey.recommendList]=s;t.append(s);e._refreshIScroll()}}})}})();e._refreshIScroll()},_refreshIScroll:function(){var e=this.iScroll;setTimeout(function(){e&&(e.refresh(),e.scrollTo(0,0))},0)},_updatePopupInputPlaceholder:function(){var e=$(this.params.searchBarInputId).data("search-query")||"";$(".input",this.container).prop("placeholder",e)},show:function(){this._getLocation();this.container.show();this.inputObj.val("").focus();this._updatePopupInputPlaceholder();this.container.trigger("show");return this},hide:function(){var e=this;window.setTimeout(function(){e.inputObj.blur()},0);this.container.hide();this.container.trigger("hide");return this},on:function(e,t){this.container.on(e,t);return this},off:function(e,t){this.container.off(e,t);return this}};n.exports=c}(t.exports,t,e);e.____MODULES["190b46b94e2149b28f9ac370e8bc7750"]=t.exports})(this);(function(e){var t={id:"88c9d464a24756622e8723d5855ddadb",filename:"searchPage.js",exports:{}};if(!e.____MODULES){e.____MODULES={}}var n=function(t,n,r){var i=e.____MODULES["190b46b94e2149b28f9ac370e8bc7750"];$(function(){var e=$(".page-wrapper"),t=new i({searchBarInputId:"#searchBarInput"});t.on("show",function(){e.hide()}).on("hide",function(){e.show();$(window).trigger("resize")});$(".input-wrapper",".search-bar").on("click",function(){t.show()})})}(t.exports,t,e);e.____MODULES["88c9d464a24756622e8723d5855ddadb"]=t.exports})(this)